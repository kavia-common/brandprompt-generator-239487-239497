{"is_source_file": true, "format": "JavaScript", "description": "Test suite for storage-related functions, focusing on loadSettings and saveSettings, using Jest testing framework.", "external_files": ["./storage"], "external_methods": ["loadSettings", "saveSettings"], "published": [], "classes": [], "methods": [{"name": "beforeEach", "description": "Sets up test environment: clears localStorage, deletes chrome API, restores mocks."}, {"name": "test(\"saveSettings and loadSettings use localStorage fallback\")", "description": "Tests saving and loading settings fallback to localStorage."}, {"name": "test(\"loadSettings prefers chrome.storage.local when available\")", "description": "Tests that loadSettings uses chrome.storage.local if available."}, {"name": "test(\"saveSettings prefers chrome.storage.local when available\")", "description": "Tests that saveSettings uses chrome.storage.local if available."}], "calls": ["localStorage.clear", "delete window.chrome", "jest.restoreAllMocks", "saveSettings({ brandName: \"Acme\" })", "loadSettings()", "expect(loaded).toEqual({ brandName: \"Acme\" })", "window.chrome = { storage: { local: { get: jest.fn().mockResolvedValue(...), set: jest.fn() } } }", "loadSettings()", "expect(window.chrome.storage.local.get).toHaveBeenCalledWith([\"brandprompt_settings_v1\"])", "expect(loaded).toEqual({ brandName: \"FromChrome\" })", "await saveSettings({ brandName: \"ToChrome\" })", "expect(window.chrome.storage.local.set).toHaveBeenCalledWith({ brandprompt_settings_v1: { brandName: \"ToChrome\" } })"], "search-terms": ["storage", "loadSettings", "saveSettings", "chrome.storage.local", "localStorage", "jest"], "state": 2, "file_id": 15, "knowledge_revision": 41, "git_revision": "", "ctags": [], "hash": "d99682e15cb85fa8ab22168c9cc0ebd8", "format-version": 4, "code-base-name": "prompt_extension_frontend", "filename": "prompt_extension_frontend/src/test_storage.js", "revision_history": [{"41": ""}]}